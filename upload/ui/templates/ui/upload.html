{% extends "_base.html" %}
{% import "_formHelpers.html" as formhelper %}

{% block content %}

<div class="panel panel-primary">

    <div class="panel-heading">{{ site_name }}: Upload</div>

    <form id="study_data_upload" method="POST" class="form" enctype="multipart/form-data">
        <fieldset>
                {{ form.hidden_tag() }}
                {{ formhelper.render_field(form.study_number) }}
                {{ formhelper.render_field(form.protocol_followed) }}
                {{ formhelper.render_field(form.protocol_deviation_description) }}
                {{ formhelper.render_field(form.comments) }}
                {{ formhelper.render_field(form.study_file) }}
                {{ formhelper.render_field(form.cmr_data_recording_form) }}
    
                {{ formhelper.render_button_bar('ui.index') }}
        </fieldset>
    
    </form>
</div>


<!--
<div class="progress">
    <div class="bar"></div >
    <div class="percent">0%</div >
</div>

<div id="status"></div>
-->
{% endblock %}

{% block js %}
<!--

<script>

$("form#study_data_upload").submit(function(e){
    var formData = new FormData($(this)[0]);
    //append some non-form data also
    $.ajax({
        type: "POST",
        data: formData,
        processData: false,
        contentType: false,
        enctype: 'multipart/form-data',
        progress: function(event) {
            var percentComplete = evt.loaded / evt.total;
            percentComplete = parseInt(percentComplete * 100);
            var percentVal = percentComplete + '%';
            bar.width(percentVal);
            percent.html(percentVal);
        },
        success: function(data, textStatus, jqXHR) {
            alert('done');
           //process data
        },
        error: function(data, textStatus, jqXHR) {
            alert('Failed');
           //process error msg
        },
    });

   e.preventDefault();
});


</script>    
-->
{% endblock %}
